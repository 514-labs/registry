{
  "$schema": "https://schemas.connector-factory.dev/scaffold.schema.json",
  "scaffold": "meta",
  "version": "1.0.0",
  "description": "Scaffold pipeline root _meta (pipeline-level metadata), version _meta, and provider _meta (author-level metadata).",
  "variables": {
    "pipeline": {
      "description": "Pipeline name (kebab-case).",
      "example": "ga-to-clickhouse",
      "pattern": "^[a-z0-9][a-z0-9-]*$"
    },
    "version": {
      "description": "Pipeline version identifier (not necessarily semver). Examples: v1, 2024-10-01",
      "example": "v1",
      "pattern": "^[A-Za-z0-9][A-Za-z0-9._-]*$"
    },
    "author": {
      "description": "GitHub organization or user handle (kebab-case). Used for linking and avatars.",
      "example": "514-labs",
      "pattern": "^[a-z0-9](?:[a-z0-9-]{0,37}[a-z0-9])?$"
    }
  },
  "structure": [
    {
      "type": "dir",
      "name": "{pipeline}",
      "children": [
        {
          "type": "dir",
          "name": "_meta",
          "children": [
            {
              "type": "file",
              "name": "README.md",
              "template": "# {pipeline} (pipeline root)\n\nShared, provider-agnostic docs and assets for `{pipeline}`.\n"
            },
            {
              "type": "file",
              "name": "pipeline.json",
              "template": "{\n  \"$schema\": \"https://schemas.connector-factory.dev/pipeline-root.schema.json\",\n  \"name\": \"{pipeline}\",\n  \"title\": \"{pipeline}\",\n  \"tags\": [],\n  \"description\": \"\",\n  \"homepage\": \"\",\n  \"registryUrl\": \"https://github.com/514-labs/factory/tree/main/pipeline-registry/{pipeline}\"\n}\n"
            },
            { "type": "dir", "name": "assets" }
          ]
        },
        {
          "type": "dir",
          "name": "{version}",
          "children": [
            {
              "type": "dir",
              "name": "_meta",
              "children": [
                {
                  "type": "file",
                  "name": "README.md",
                  "template": "# {pipeline} {version}\n\nVersion-level metadata and assets for `{pipeline}`.\n"
                },
                {
                  "type": "file",
                  "name": "version.json",
                  "template": "{\n  \"name\": \"{pipeline}\",\n  \"version\": \"{version}\",\n  \"status\": \"experimental\",\n  \"releasedAt\": \"\",\n  \"notes\": \"\"\n}\n"
                },
                { "type": "dir", "name": "assets" }
              ]
            },
            {
              "type": "dir",
              "name": "{author}",
              "children": [
                {
                  "type": "dir",
                  "name": "_meta",
                  "children": [
                    {
                      "type": "file",
                      "name": "README.md",
                      "template": "# {pipeline}\n\n> Maintained by {author}\n\nThis folder contains provider-level metadata and lineage assets.\n"
                    },
                    {
                      "type": "file",
                      "name": "CHANGELOG.md",
                      "template": "# Changelog\n\nAll notable changes to `{pipeline}` by `{author}`.\n\n"
                    },
                    { "type": "file", "name": "LICENSE", "template": "MIT\n" },
                    {
                      "type": "file",
                      "name": "pipeline.json",
                      "template": "{\n  \"$schema\": \"https://schemas.connector-factory.dev/pipeline.schema.json\",\n  \"name\": \"{pipeline}\",\n  \"author\": \"{author}\",\n  \"authorType\": \"organization\",\n  \"version\": \"{version}\",\n  \"description\": \"\",\n  \"tags\": [],\n  \"schedule\": { \"cron\": \"0 * * * *\", \"timezone\": \"UTC\" },\n  \"source\": { \"type\": \"connector\", \"connector\": { \"name\": \"\", \"version\": \"\", \"author\": \"\" }, \"stream\": \"\" },\n  \"systems\": [],\n  \"transformations\": [],\n  \"destination\": { \"system\": \"clickhouse\", \"database\": \"\", \"table\": \"\" },\n  \"lineage\": { \"nodes\": [], \"edges\": [] },\n  \"maintainers\": []\n}\n"
                    },
                    { "type": "dir", "name": "assets" }
                  ]
                },
                { "type": "dir", "name": "python" },
                { "type": "dir", "name": "typescript" }
              ]
            }
          ]
        }
      ]
    }
  ]
}
